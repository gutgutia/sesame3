# Sesame3 Mobile App

This directory contains documentation for the Capacitor-based mobile app.

## Architecture

The mobile app uses a **Remote WebView** approach:
- Points to the hosted web app (no bundled assets)
- Updates are instant when you deploy to Vercel
- No OTA service needed
- Requires internet (which Sesame3 needs anyway)

## Directory Structure

```
sesame3/
├── ios/                    # Xcode project (generated by Capacitor)
├── android/                # Android Studio project (generated by Capacitor)
├── mobile/
│   ├── README.md           # This file
│   └── assets/             # App icons, splash screens
├── capacitor.config.ts     # Capacitor configuration
└── package.json            # Mobile build scripts
```

## Development

### Prerequisites

- **iOS**: Xcode 15+ (Mac only), Apple Developer account ($99/year)
- **Android**: Android Studio, JDK 17+

### Commands

```bash
# Sync web changes to native projects
npm run mobile:sync

# Open in Xcode (iOS)
npm run mobile:ios

# Open in Android Studio
npm run mobile:android

# Run on iOS simulator
npm run mobile:run:ios

# Run on Android emulator
npm run mobile:run:android
```

### Local Development

To test against local dev server instead of production:

1. Start your dev server: `npm run dev`
2. Update `capacitor.config.ts`:
   ```typescript
   server: {
     url: "http://localhost:3000",
     cleartext: true,
   }
   ```
3. Run: `npm run mobile:sync && npm run mobile:run:ios`

## Building for App Store

### iOS (App Store)

1. Open Xcode: `npm run mobile:ios`
2. Select your Team in Signing & Capabilities
3. Set Bundle Identifier to: `com.sesame3.app`
4. Product → Archive
5. Distribute to App Store Connect

### Android (Play Store)

1. Open Android Studio: `npm run mobile:android`
2. Build → Generate Signed Bundle/APK
3. Create/use your keystore
4. Upload AAB to Google Play Console

## App Store Requirements

### iOS App Store

- [ ] App icons (1024x1024 for App Store, various sizes for device)
- [ ] Screenshots (6.7", 6.5", 5.5" iPhone sizes minimum)
- [ ] Privacy policy URL
- [ ] App description
- [ ] Age rating (likely 4+ for education app)

### Google Play Store

- [ ] App icons (512x512)
- [ ] Feature graphic (1024x500)
- [ ] Screenshots (phone and tablet)
- [ ] Privacy policy URL
- [ ] App description
- [ ] Content rating questionnaire

## Configuration

### Changing the Server URL

Edit `capacitor.config.ts`:

```typescript
server: {
  url: "https://your-domain.com",
}
```

Then sync: `npm run mobile:sync`

### App ID / Bundle Identifier

Currently set to: `com.sesame3.app`

To change, update:
1. `capacitor.config.ts` → `appId`
2. iOS: Xcode project settings
3. Android: `android/app/build.gradle` → `applicationId`

## Troubleshooting

### "No such module" errors in Xcode
```bash
cd ios/App && pod install
```

### Android build fails
```bash
cd android && ./gradlew clean
```

### App shows blank/white screen
- Check that your server URL is accessible
- Check browser console in Safari/Chrome DevTools for errors
- Ensure CORS is configured on your API
